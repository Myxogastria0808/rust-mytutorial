fn main() {
    //ã‚¹ã‚¿ãƒƒã‚¯
    //ãƒ¡ãƒ¢ãƒªè¿‘ãã«é ˜åŸŸã‚’ç¢ºä¿
    //ãƒ’ãƒ¼ãƒ—
    //ã‚¬ãƒ™ãƒ¼ã‚¸ã‚³ãƒ¬ã‚¯ã‚·ãƒ§ãƒ³çš„ãªã‚‚ã®ï¼Ÿ

    //æ‰€æœ‰æ¨©
    //ã‚¹ã‚³ãƒ¼ãƒ—ã®å¤–ã§ã¯ã€sã¯ç ´æ£„ã•ã‚Œã‚‹
    {
        let s: &str = "hello";
        //OK
        println!("{}", s);
    }
    //NG
    //println!("{}", s);

    //**ãƒ’ãƒ¼ãƒ—é ˜åŸŸã«ãŠã‘ã‚‹æ‰€æœ‰æ¨©ã®æŒ™å‹•***/
    //move (æ‰€æœ‰æ¨©ã®ç§»å‹•ã‚’æ„å‘³ã™ã‚‹)
    let s1: String = String::from("Hello");
    let s2: String = s1;
    //ã“ã®æ™‚ç‚¹ã§ã€s1ã¯å€¤ã‚’ä¿æŒã—ã¦ã„ãªã„
    println!("{}", s2);

    //clone(deep copyã«å½“ãŸã‚‹)
    //ç‹¬ç«‹ã—ãŸãƒ‡ãƒ¼ã‚¿ã¨ã—ã¦ä¿æŒã™ã‚‹
    let s1_clone: String = String::from("hello, clone!");
    let s2_clone: String = s1_clone.clone();
    println!("s1_clone: {}\ns2_clone: {}", s1_clone, s2_clone);

    //***ã‚¹ã‚¿ãƒƒã‚¯é ˜åŸŸã®ã¿ã«å€¤ãŒä¿å­˜ã•ã‚Œã¦ã„ã‚‹å ´åˆã®æ‰€æœ‰æ¨©ã®æŒ™å‹•***//
    //å€¤ã®å…¨ã¦ãŒã‚¹ã‚¿ãƒƒã‚¯é ˜åŸŸã«ã‚ã‚‹å ´åˆã¯ã€æ¯å›deep copyã•ã‚Œã¦ã„ã‚‹ã€‚
    let x: usize = 0;
    let mut y: usize = x;
    println!("x: {}, y: {}", x, y);
    y = 1;
    println!("x: {}, y: {}", x, y);

    //***ãƒ’ãƒ¼ãƒ—é ˜åŸŸã«ä¿å­˜ã•ã‚Œã¦ã„ã‚‹å ´åˆã¨ã‚¹ã‚¿ãƒƒã‚¯é ˜åŸŸã«ä¿å­˜ã•ã‚Œã¦ã„ã‚‹å ´åˆã®é•ã„***/
    {
        //ãƒ’ãƒ¼ãƒ—é ˜åŸŸã«å€¤ãŒä¿å­˜ã•ã‚Œã‚‹å ´åˆ
        let s: String = String::from("hello");
        take_ownership(s); //ã“ã“ã§sãŒmoveã•ã‚Œã‚‹

        //ã‚¹ã‚¿ãƒƒã‚¯é ˜åŸŸã«å€¤ãŒä¿å­˜ã•ã‚Œã¦ã„ã‚‹å ´åˆ
        let x = 5;
        make_copy(x); //xã¯ã€Copyã‚ˆã‚Šã€å¼•ãç¶šãä½¿ç”¨å¯èƒ½

        fn take_ownership(some_string: String) {
            println!("{}", some_string);
        }

        fn make_copy(some_integer: isize) {
            println!("{}", some_integer);
        }
    }
    //***æ‰€æœ‰æ¨©ã‚’è¿”ã—ã¦ã‚ã’ã‚‹ã«ã¯? ***//
    //é–¢æ•°ã«æ¸¡ã—ãŸå¤‰æ•°ã¯ã€é–¢æ•°ã«ã‚¹ã‚³ãƒ¼ãƒ—ã•ã‚Œã‚‹ãŸã‚ã€æ‰€æœ‰æ¨©ãŒç ´æ£„ã•ã‚Œã‚‹
    //å‘¼ã³å‡ºã—å…ƒé–¢æ•°ã«moveã—è¿”ã—ã¦ã„ã‚‹
    //s3ã«ãƒ ãƒ¼ãƒ–ã•ã‚Œã‚‹ã¨ã„ã£ã¦ã‚‚ã„ã„ã‹ã‚‚ã—ã‚Œãªã„
    {
        let s1: String = String::from("hello");
        let s2: String = takes_and_gives_back(s1);

        println!("s2: {}", s2);

        fn takes_and_gives_back(some_string: String) -> String {
            some_string
        }
    }
    //***å‚ç…§(å€Ÿç”¨)ã‚’ã™ã‚Œã°ã‚ˆã„***//
    //***ä¸å¤‰ãªå€Ÿç”¨***//
    {
        let s1: String = String::from("hello");
        let s1_len: usize = calculate_length(&s1);

        println!("s1: {}, s1_len: {}", s1, s1_len);

        fn calculate_length(s: &String) -> usize {
            let length = s.len();
            length
        }
    }
    //***å¯å¤‰ãªå€Ÿç”¨***//
    {
        let mut s: String = String::from("hello");
        change(&mut s);

        fn change(some_string: &mut String) {
            some_string.push_str(", world");
        }

        println!("s: {}", s);
    }
    //***å€Ÿç”¨ã¾ã¨ã‚***//
    //mutã«ã—ã¦ã€&mutã§å€Ÿç”¨ãŒå¯èƒ½ã«ãªã‚‹
    //?ä¸€ã¤ã—ã‹å¯å¤‰ãªå‚ç…§ã‚’æŒã¦ãªã„ <- ç«¶åˆãŒèµ·ããªã„ã‚ˆã†ã«ã™ã‚‹ãŸã‚
    //?NGä¾‹
    // let mut s = String::from("hello");
    // let r1 = &mut s;
    // let r2 = &mut s; <-ã“ã‚Œã¯ã§ããªã„ï¼
    //?ä¸å¤‰ãªå‚ç…§ã¨å¯å¤‰ãªå‚ç…§ã‚’åŒæ™‚ã«æŒã¦ãªã„ <- ãã‚Œã¯ãã†ã˜ã‚ƒãªã„ã¨ã‚„ã°ã„ã‚ˆã­ğŸ˜Š
    //?NGä¾‹
    //let mut s = String::from("hello");
    // let r1 = &s;
    // let r2 = &mut s; <-ã“ã‚Œã¯ã§ããªã„ï¼
    //?ä¸å¤‰ãªå‚ç…§ã¯ã€åŒæ™‚ã«è¤‡æ•°ã‚‚æŒãŸã›ã‚‰ã‚Œã‚‹
    //?OKãªä¾‹
    //let mut s = String::from("hello");
    // let r1 = &s;
    // let r2 = &s; <-ã“ã‚Œã¯ã§ãã‚‹ï¼

    //***NGä¾‹: ãƒ€ãƒ³ã‚°ãƒªãƒ³ã‚°ãƒã‚¤ãƒ³ã‚¿ (ä»–äººã«æ¸¡ã•ã‚Œã¦ã—ã¾ã£ãŸå¯èƒ½æ€§ã®ã‚ã‚‹ãƒ¡ãƒ¢ãƒªã‚’æŒ‡ã™ãƒã‚¤ãƒ³ã‚¿ã®ã“ã¨ã§ã‚ã‚Šã€ãã®ç®‡æ‰€ã¸ã®ãƒã‚¤ãƒ³ã‚¿ã‚’ä¿æŒã—ã¦ã„ã‚‹é–“ã«ã€ ãƒ¡ãƒ¢ãƒªã‚’è§£æ”¾ã—ã¦ã—ã¾ã†ã“ã¨)***//
    //let reference_to_nothing = dangle();
    //fn dangle() -> &String {
    //    let s: String = String::from("hello");
    //    &s <-sã¯ã€é–¢æ•°å†…ã§ã—ã‹ç”Ÿãã‚‰ã‚Œãªã„ã®ã§ã€å‚ç…§å…ˆãŒæ¶ˆãˆã‚‹
    //}
    //***å‚ç…§ã®è¦å‰‡***//    
    //1. ä»»æ„ã®ã‚¿ã‚¤ãƒŸãƒ³ã‚°ã§ã€ä¸€ã¤ã®å¯å¤‰å‚ç…§ã‹ä¸å¤‰ãªå‚ç…§ã„ãã¤ã§ã‚‚ã®ã©ã¡ã‚‰ã‹ã‚’è¡Œãˆã‚‹ã€‚
    //2. å‚ç…§ã¯å¸¸ã«æœ‰åŠ¹ã§ãªã‘ã‚Œã°ãªã‚‰ãªã„ã€‚
}
